(()=>{"use strict";let t="https://tejassrinivasan.pythonanywhere.com/";var e=!1,n=[];let i=-1,o=null,s=-1,a=-1,r=-1,u=0,l=0,d=0;function _(t){s=t,$("#button_answeronly_usertrusts").attr("disabled","true"),$("#button_answeronly_userdistrusts").attr("disabled","true"),$("#button_answeronly_userunsure").attr("disabled","true"),0==t?$("#button_answeronly_usertrusts").attr("activedecision","true"):1==t?$("#button_answeronly_userdistrusts").attr("activedecision","true"):2==t&&$("#button_answeronly_userunsure").attr("activedecision","true"),$("#ai_explanation_div").show()}function c(t){a=t,$("#button_withexplanation_usertrusts").attr("disabled","true"),$("#button_withexplanation_userdistrusts").attr("disabled","true"),$("#button_withexplanation_userunsure").attr("disabled","true"),0==t?$("#button_withexplanation_usertrusts").attr("activedecision","true"):1==t?$("#button_withexplanation_userdistrusts").attr("activedecision","true"):2==t&&$("#button_withexplanation_userunsure").attr("activedecision","true"),$("#ai_explanation_quality_div").show()}function b(t){r=t,$("#button_withexplanationquality_usertrusts").attr("disabled","true"),$("#button_withexplanationquality_userdistrusts").attr("disabled","true"),$("#button_withexplanationquality_userunsure").attr("disabled","true"),0==t?$("#button_withexplanationquality_usertrusts").attr("activedecision","true"):1==t?$("#button_withexplanationquality_userdistrusts").attr("activedecision","true"):2==t&&$("#button_withexplanationquality_userunsure").attr("activedecision","true"),$("#button_next").show(),$("#button_next").removeAttr("disabled")}function h(t){l+=t,0==l?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),l>=5?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),6==l&&($("#instructions_and_decorations").show(),$("#main_box_instructions").hide(),$("#main_box_experiment").show(),y()),$("#main_box_instructions").children(":not(input)").each(((t,e)=>{$(e).hide()})),$(`#instructions_${l}`).show()}function m(t){return 2!=t?t==1-o.prediction_is_correct?1:0:-1}document.getElementById("button_answeronly_usertrusts")?.addEventListener("click",(()=>_(0))),document.getElementById("button_answeronly_userdistrusts")?.addEventListener("click",(()=>_(1))),document.getElementById("button_answeronly_userunsure")?.addEventListener("click",(()=>_(2))),document.getElementById("button_withexplanation_usertrusts")?.addEventListener("click",(()=>c(0))),document.getElementById("button_withexplanation_userdistrusts")?.addEventListener("click",(()=>c(1))),document.getElementById("button_withexplanation_userunsure")?.addEventListener("click",(()=>c(2))),document.getElementById("button_withexplanationquality_usertrusts")?.addEventListener("click",(()=>b(0))),document.getElementById("button_withexplanationquality_userdistrusts")?.addEventListener("click",(()=>b(1))),document.getElementById("button_withexplanationquality_userunsure")?.addEventListener("click",(()=>b(2))),$("#button_instructions_next").on("click",(()=>h(1))),$("#button_instructions_prev").on("click",(()=>h(-1))),$("#button_next").on("click",(()=>{let e=u;if(function(){if(2!=r){let t=1-o.prediction_is_correct;r==t&&(u+=.1)}}(),-1!=i){let n={question_i:i,user_selections:{answeronly:s,withexplanation:a,withexplanationquality:r},user_is_correct:{answeronly:m(s),withexplanation:m(a),withexplanationquality:m(r)},balance:{old:e,new:u}};n.question=o,n.count_exited_page=d,async function(e){e.url_data=globalThis.url_data,console.log("Data"),"study_id"in e.url_data||(e.url_data.study_id="demo_study"),"prolific_id"in e.url_data||(e.url_data.prolific_id="demo_user"),"session_id"in e.url_data||(e.url_data.session_id="demo_session"),e.url_data.queue_id=globalThis.uid,console.log("logged",e),console.log("Logging to",t+"log");try{let n=await $.ajax(t+"log",{data:JSON.stringify({project:"vlm-rationales-study/"+e.url_data.study_id,uid:globalThis.uid+"_"+e.url_data.prolific_id,payload:JSON.stringify(e)}),type:"POST",contentType:"application/json"});return await async function(){return new Promise((t=>setTimeout(t,2e3)))}(),n}catch(t){console.log(t)}}(n),d=0}y()}));let w=null;function v(t,e,n,i){w&&(clearInterval(w),w=null),n.forEach((t=>t.setAttribute("disabled","true")));let o=document.createElement("div");o.id=`timer_${e.id}`,o.style.fontWeight="bold",e.appendChild(o);let s=t;o.textContent=`Please wait ${s} second(s) before making your selection.`,w=setInterval((()=>{s--,s>=0?o.textContent=`Please wait ${s} second(s) before making your selection.`:(null!==w&&(clearInterval(w),w=null),w=null,e.removeChild(o),n.forEach((t=>t.removeAttribute("disabled"))),i&&i())}),1e3)}function y(){if(w&&(clearInterval(w),w=null),$("#button_readytoanswer").removeAttr("activedecision"),$("#button_readytoanswer").removeAttr("disabled"),$("#button_readytoanswer").show(),$("#button_answeronly_usertrusts").removeAttr("activedecision"),$("#button_answeronly_usertrusts").removeAttr("disabled"),$("#button_answeronly_userdistrusts").removeAttr("activedecision"),$("#button_answeronly_userdistrusts").removeAttr("disabled"),$("#button_answeronly_userunsure").removeAttr("activedecision"),$("#button_answeronly_userunsure").removeAttr("disabled"),$("#button_withexplanation_usertrusts").removeAttr("activedecision"),$("#button_withexplanation_usertrusts").removeAttr("disabled"),$("#button_withexplanation_userdistrusts").removeAttr("activedecision"),$("#button_withexplanation_userdistrusts").removeAttr("disabled"),$("#button_withexplanation_userunsure").removeAttr("activedecision"),$("#button_withexplanation_userunsure").removeAttr("disabled"),$("#button_withexplanationquality_usertrusts").removeAttr("activedecision"),$("#button_withexplanationquality_usertrusts").removeAttr("disabled"),$("#button_withexplanationquality_userdistrusts").removeAttr("activedecision"),$("#button_withexplanationquality_userdistrusts").removeAttr("disabled"),$("#button_withexplanationquality_userunsure").removeAttr("activedecision"),$("#button_withexplanationquality_userunsure").removeAttr("disabled"),$("#ai_explanation_div").hide(),$("#ai_explanation_quality_div").hide(),$("#button_next").hide(),$("#button_quit").hide(),i+=1,i>=n.length)return $("#main_box_experiment").hide(),void(e?($("#reward_box_mock").text(`Your total reward is $${u.toFixed(2)} (${i} questions answered) + $2.`),$("#reward_box_mock").show(),$("#main_box_end_mock").show()):($("#reward_box").text(`Your total reward is $${u.toFixed(2)} (${i} questions answered) + $2.`),$("#reward_box").show(),$("#main_box_end").show()));o=n[i],$("#question_span").html(o.question),$("#ai_prediction_span").html(o.predicted_answer),$("#ai_explanation_span").html(o.generated_rationale);let t=Math.round(100*o["visual fidelity"]);$("#explanation_fidelity_span").html(`${t}%`);let s=Math.round(100*o.contrastiveness);$("#explanation_contrastiveness_span").html(`${s}%`),$("#progress").text(`Progress: ${i+1} / ${n.length}`),function(t){const e=document.getElementById("ai_answer_div"),n=[document.getElementById("button_answeronly_usertrusts"),document.getElementById("button_answeronly_userdistrusts"),document.getElementById("button_answeronly_userunsure")];function i(){n.forEach((t=>t?.removeEventListener("click",i))),function(t){const e=document.getElementById("ai_explanation_div"),n=t.split(" ").length,i=Math.max(Math.ceil(3+n/238*60),5),o=[document.getElementById("button_withexplanation_usertrusts"),document.getElementById("button_withexplanation_userdistrusts"),document.getElementById("button_withexplanation_userunsure")];function s(){o.forEach((t=>t?.removeEventListener("click",s))),function(){const t=document.getElementById("ai_explanation_quality_div"),e=[document.getElementById("button_withexplanationquality_usertrusts"),document.getElementById("button_withexplanationquality_userdistrusts"),document.getElementById("button_withexplanationquality_userunsure")];function n(){e.forEach((t=>t?.removeEventListener("click",n))),$("#button_next").show()}e.forEach((t=>t?.removeEventListener("click",n))),e.forEach((t=>t?.addEventListener("click",n))),$("#ai_explanation_quality_div").show(),v(5,t,e,null)}()}o.forEach((t=>t?.removeEventListener("click",s))),o.forEach((t=>t?.addEventListener("click",s))),$("#ai_explanation_div").show(),v(i,e,o,null)}(t)}n.forEach((t=>t?.removeEventListener("click",i))),n.forEach((t=>t?.addEventListener("click",i))),$("#ai_answer_div").show(),v(5,e,n,null)}(o.generated_rationale)}document.onvisibilitychange=()=>{document.hidden?(console.log("Window lost focus."),null!==w&&(clearInterval(w),w=null)):console.log("Window regained focus.")};const p=new URLSearchParams(window.location.search),x=p.get("start"),g=p.get("uid");if(globalThis.url_data=function(t){const e={};for(const[n,i]of t)e[n]=i;return e}(p.entries()),null==globalThis.url_data.study_id&&(globalThis.url_data.study_id="demo_study"),null==globalThis.url_data.prolific_id&&(globalThis.url_data.prolific_id="demo_user"),null==globalThis.url_data.session_id&&(globalThis.url_data.session_id="demo_session"),null!=g){if(globalThis.uid=g,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${p.get("prolific_queue_name")}/${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}globalThis.url_data.session_id.startsWith("demo")&&(e=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{n=t,null!=x&&(i=parseInt(x)-1,console.log("Starting from",i)),h(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let f=!1;document.onvisibilitychange=()=>{f||(d+=1,f=!0,f=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ0Q1SCxHQUFxQixFQUNyQjRILEdBQWUsRUFJZkEsR0FBZSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuYXN5bmMgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZF9kYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gaW5jbHVkZSB0aW1lc3RhbXAgc28gdGhhdCB0aGluZ3MgZG9uJ3QgZ2V0IGNhY2hlZFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmdldEpTT04oXG4gICAgICAgIGBiYWtlZF9xdWV1ZXMvJHtnbG9iYWxUaGlzLnVpZH0uanNvbj90PSR7RGF0ZS5ub3coKX1gLFxuICAgIClcbiAgICByZXR1cm4gcmVzdWx0XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nX2RhdGEoZGF0YSk6IFByb21pc2U8YW55PiB7XG4gICAgLy9pZiAoTU9DS01PREUpIHtcbiAgICAvLyAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAvLyAgICByZXR1cm5cbiAgICAvL31cbiAgICBcbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwiZGVtb19zdHVkeVwiXG4gICAgfVxuICAgIGlmICghKFwicHJvbGlmaWNfaWRcIiBpbiBkYXRhWyd1cmxfZGF0YSddKSkge1xuICAgICAgICBkYXRhWyd1cmxfZGF0YSddW1wicHJvbGlmaWNfaWRcIl0gPSBcImRlbW9fdXNlclwiXG4gICAgfVxuICAgIGlmICghKFwic2Vzc2lvbl9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzZXNzaW9uX2lkXCJdID0gXCJkZW1vX3Nlc3Npb25cIlxuICAgIH1cbiAgICBkYXRhW1widXJsX2RhdGFcIl1bXCJxdWV1ZV9pZFwiXSA9IGdsb2JhbFRoaXMudWlkXG4gICAgY29uc29sZS5sb2coXCJsb2dnZWRcIiwgZGF0YSlcbiAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdG9cIiwgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIilcblxuICAgIHRyeSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCJ2bG0tcmF0aW9uYWxlcy1zdHVkeS9cIitkYXRhWyd1cmxfZGF0YSddWydzdHVkeV9pZCddLFxuICAgICAgICAgICAgICAgICAgICB1aWQ6IGdsb2JhbFRoaXMudWlkK1wiX1wiK2RhdGFbJ3VybF9kYXRhJ11bJ3Byb2xpZmljX2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IHNsZWVwKDIwMDApO1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbn0iLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSBcIi4vZ2xvYmFsc1wiXG5leHBvcnQgdmFyIFVJRDogc3RyaW5nXG5leHBvcnQgdmFyIE1PQ0tNT0RFOiBib29sZWFuID0gZmFsc2VcbmltcG9ydCB7IGxvYWRfZGF0YSwgbG9nX2RhdGEgfSBmcm9tICcuL2Nvbm5lY3RvcidcbmltcG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHNcIlxuXG52YXIgZGF0YTogYW55W10gPSBbXVxubGV0IHF1ZXN0aW9uX2kgPSAtMVxubGV0IHF1ZXN0aW9uOiBhbnkgPSBudWxsXG5sZXQgdXNlcnNlbGVjdGlvbl9hbnN3ZXJvbmx5OiBudW1iZXIgPSAtMVxubGV0IHVzZXJzZWxlY3Rpb25fd2l0aGV4cGxhbmF0aW9uOiBudW1iZXIgPSAtMVxubGV0IHVzZXJzZWxlY3Rpb25fd2l0aGV4cGxhbmF0aW9ucXVhbGl0eTogbnVtYmVyID0gLTFcblxubGV0IGJhbGFuY2UgPSAwXG5sZXQgYmFsYW5jZV9pbmNyZW1lbnQgPSAwLjEgICAgIC8vIEJhbGFuY2UgdXBkYXRlcyBieSAkMC4xMCBmb3IgZXZlcnkgY29ycmVjdCBzZWxlY3Rpb25cblxubGV0IGluc3RydWN0aW9uX2k6IG51bWJlciA9IDBcbmxldCBjb3VudF9leGl0ZWRfcGFnZTogbnVtYmVyID0gMFxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyQW5zd2VyT25seVVzZXJTZWxlY3Rpb24odXNlcl9jaG9pY2U6IG51bWJlcikge1xuICAgIHVzZXJzZWxlY3Rpb25fYW5zd2Vyb25seSA9IHVzZXJfY2hvaWNlXG5cbiAgICAkKFwiI2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJ0cnVzdHNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcmRpc3RydXN0c1wiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fYW5zd2Vyb25seV91c2VydW5zdXJlXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICBpZiAodXNlcl9jaG9pY2UgPT0gMCkge1xuICAgICAgICAkKFwiI2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJ0cnVzdHNcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSBpZiAodXNlcl9jaG9pY2UgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJkaXN0cnVzdHNcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSBpZiAodXNlcl9jaG9pY2UgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJ1bnN1cmVcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbn1cbi8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgYnV0dG9uIGNsaWNrXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcnRydXN0cycpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHJlZ2lzdGVyQW5zd2VyT25seVVzZXJTZWxlY3Rpb24oMCkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJkaXN0cnVzdHMnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZWdpc3RlckFuc3dlck9ubHlVc2VyU2VsZWN0aW9uKDEpKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b25fYW5zd2Vyb25seV91c2VydW5zdXJlJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVnaXN0ZXJBbnN3ZXJPbmx5VXNlclNlbGVjdGlvbigyKSk7XG5cblxuZnVuY3Rpb24gcmVnaXN0ZXJXaXRoRXhwbGFuYXRpb25Vc2VyU2VsZWN0aW9uKHVzZXJfY2hvaWNlOiBudW1iZXIpIHtcbiAgICB1c2Vyc2VsZWN0aW9uX3dpdGhleHBsYW5hdGlvbiA9IHVzZXJfY2hvaWNlXG5cbiAgICAkKFwiI2J1dHRvbl93aXRoZXhwbGFuYXRpb25fdXNlcnRydXN0c1wiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fd2l0aGV4cGxhbmF0aW9uX3VzZXJkaXN0cnVzdHNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydW5zdXJlXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICBpZiAodXNlcl9jaG9pY2UgPT0gMCkge1xuICAgICAgICAkKFwiI2J1dHRvbl93aXRoZXhwbGFuYXRpb25fdXNlcnRydXN0c1wiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfSBlbHNlIGlmICh1c2VyX2Nob2ljZSA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VyZGlzdHJ1c3RzXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9IGVsc2UgaWYgKHVzZXJfY2hvaWNlID09IDIpIHtcbiAgICAgICAgJChcIiNidXR0b25fd2l0aGV4cGxhbmF0aW9uX3VzZXJ1bnN1cmVcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3F1YWxpdHlfZGl2XCIpLnNob3coKVxufVxuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydHJ1c3RzJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVnaXN0ZXJXaXRoRXhwbGFuYXRpb25Vc2VyU2VsZWN0aW9uKDApKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b25fd2l0aGV4cGxhbmF0aW9uX3VzZXJkaXN0cnVzdHMnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZWdpc3RlcldpdGhFeHBsYW5hdGlvblVzZXJTZWxlY3Rpb24oMSkpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl93aXRoZXhwbGFuYXRpb25fdXNlcnVuc3VyZScpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHJlZ2lzdGVyV2l0aEV4cGxhbmF0aW9uVXNlclNlbGVjdGlvbigyKSk7XG4gIFxuZnVuY3Rpb24gcmVnaXN0ZXJXaXRoRXhwbGFuYXRpb25RdWFsaXR5VXNlclNlbGVjdGlvbih1c2VyX2Nob2ljZTogbnVtYmVyKSB7XG4gICAgdXNlcnNlbGVjdGlvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5ID0gdXNlcl9jaG9pY2VcblxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcnRydXN0c1wiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fd2l0aGV4cGxhbmF0aW9ucXVhbGl0eV91c2VyZGlzdHJ1c3RzXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJ1bnN1cmVcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIGlmICh1c2VyX2Nob2ljZSA9PSAwKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcnRydXN0c1wiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfSBlbHNlIGlmICh1c2VyX2Nob2ljZSA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcmRpc3RydXN0c1wiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfSBlbHNlIGlmICh1c2VyX2Nob2ljZSA9PSAyKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcnVuc3VyZVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJ0cnVzdHMnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZWdpc3RlcldpdGhFeHBsYW5hdGlvblF1YWxpdHlVc2VyU2VsZWN0aW9uKDApKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b25fd2l0aGV4cGxhbmF0aW9ucXVhbGl0eV91c2VyZGlzdHJ1c3RzJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVnaXN0ZXJXaXRoRXhwbGFuYXRpb25RdWFsaXR5VXNlclNlbGVjdGlvbigxKSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcnVuc3VyZScpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHJlZ2lzdGVyV2l0aEV4cGxhbmF0aW9uUXVhbGl0eVVzZXJTZWxlY3Rpb24oMikpO1xuXG5cblxuXG5mdW5jdGlvbiBuZXh0X2luc3RydWN0aW9ucyhpbmNyZW1lbnQ6IG51bWJlcikge1xuICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG5cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSAwKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPj0gNSkge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuc2hvdygpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIlN0YXJ0IHN0dWR5XCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS52YWwoXCJOZXh0XCIpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDYpIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLnNob3coKVxuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG4gICAgLy8gVXBkYXRlIHRoZSB1c2VyIGJhbGFuY2VcbiAgICBsZXQgb2xkX2JhbGFuY2UgPSBiYWxhbmNlXG4gICAgdXBkYXRlX2JhbGFuY2UoKVxuXG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfc2VsZWN0aW9uc1wiOiB7XG4gICAgICAgICAgICAgICAgXCJhbnN3ZXJvbmx5XCI6IHVzZXJzZWxlY3Rpb25fYW5zd2Vyb25seSxcbiAgICAgICAgICAgICAgICBcIndpdGhleHBsYW5hdGlvblwiOiB1c2Vyc2VsZWN0aW9uX3dpdGhleHBsYW5hdGlvbixcbiAgICAgICAgICAgICAgICBcIndpdGhleHBsYW5hdGlvbnF1YWxpdHlcIjogdXNlcnNlbGVjdGlvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ1c2VyX2lzX2NvcnJlY3RcIjoge1xuICAgICAgICAgICAgICAgIFwiYW5zd2Vyb25seVwiOiBpc191c2VyX2NvcnJlY3QodXNlcnNlbGVjdGlvbl9hbnN3ZXJvbmx5KSxcbiAgICAgICAgICAgICAgICBcIndpdGhleHBsYW5hdGlvblwiOiBpc191c2VyX2NvcnJlY3QodXNlcnNlbGVjdGlvbl93aXRoZXhwbGFuYXRpb24pLFxuICAgICAgICAgICAgICAgIFwid2l0aGV4cGxhbmF0aW9ucXVhbGl0eVwiOiBpc191c2VyX2NvcnJlY3QodXNlcnNlbGVjdGlvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYmFsYW5jZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJvbGRcIjogb2xkX2JhbGFuY2UsXG4gICAgICAgICAgICAgICAgXCJuZXdcIjogYmFsYW5jZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcbiAgICB9XG4gICAgXG5cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG5cblxuZnVuY3Rpb24gaXNfdXNlcl9jb3JyZWN0KHNlbGVjdGlvbikge1xuICAgIGlmIChzZWxlY3Rpb24gIT0gMikge1xuICAgICAgICBsZXQgY29ycmVjdF9zZWxlY3Rpb24gPSAxIC0gcXVlc3Rpb25bXCJwcmVkaWN0aW9uX2lzX2NvcnJlY3RcIl0gLy8gMCBpZiBBSSBpcyBjb3JyZWN0LCAxIGlmIGluY29ycmVjdFxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uID09IGNvcnJlY3Rfc2VsZWN0aW9uID8gMSA6IDBcbiAgICB9XG4gICAgcmV0dXJuIC0xXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZV9iYWxhbmNlKCkge1xuICAgIGlmICh1c2Vyc2VsZWN0aW9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHkgIT0gMikge1xuICAgICAgICBsZXQgY29ycmVjdF9zZWxlY3Rpb24gPSAxIC0gcXVlc3Rpb25bXCJwcmVkaWN0aW9uX2lzX2NvcnJlY3RcIl0gLy8gMCBpZiBBSSBpcyBjb3JyZWN0LCAxIGlmIGluY29ycmVjdFxuICAgICAgICBpZiAodXNlcnNlbGVjdGlvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5ID09IGNvcnJlY3Rfc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBiYWxhbmNlICs9IGJhbGFuY2VfaW5jcmVtZW50XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldCBhY3RpdmVUaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+IHwgbnVsbCA9IG51bGw7IC8vIFRpbWVyIGludGVydmFsXG5cbmZ1bmN0aW9uIHN0YXJ0VGltZXIoZHVyYXRpb24sIHN0ZXBEaXYsIGJ1dHRvbnMsIGNhbGxiYWNrKSB7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyIHRvIHByZXZlbnQgbXVsdGlwbGUgaW50ZXJ2YWxzXG4gICAgaWYgKGFjdGl2ZVRpbWVyKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoYWN0aXZlVGltZXIpO1xuICAgICAgICBhY3RpdmVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gRGlzYWJsZSBidXR0b25zXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpKTtcbiAgICBcbiAgICAvLyBTaG93IHRpbWVyIHZpc3VhbGx5XG4gICAgbGV0IHRpbWVyRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRpbWVyRGlzcGxheS5pZCA9IGB0aW1lcl8ke3N0ZXBEaXYuaWR9YDtcbiAgICB0aW1lckRpc3BsYXkuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICBzdGVwRGl2LmFwcGVuZENoaWxkKHRpbWVyRGlzcGxheSk7XG5cbiAgICBsZXQgcmVtYWluaW5nVGltZSA9IGR1cmF0aW9uO1xuXG4gICAgLy8gSW5pdGlhbCBkaXNwbGF5XG4gICAgdGltZXJEaXNwbGF5LnRleHRDb250ZW50ID0gYFBsZWFzZSB3YWl0ICR7cmVtYWluaW5nVGltZX0gc2Vjb25kKHMpIGJlZm9yZSBtYWtpbmcgeW91ciBzZWxlY3Rpb24uYDtcblxuICAgIGFjdGl2ZVRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICByZW1haW5pbmdUaW1lLS07XG4gICAgICAgIGlmIChyZW1haW5pbmdUaW1lID49IDApIHtcbiAgICAgICAgICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IGBQbGVhc2Ugd2FpdCAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKSBiZWZvcmUgbWFraW5nIHlvdXIgc2VsZWN0aW9uLmA7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmIChhY3RpdmVUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYWN0aXZlVGltZXIpOyAvLyBTdG9wIHRoZSB0aW1lclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRpbWVyIGRpc3BsYXlcbiAgICAgICAgICAgIHN0ZXBEaXYucmVtb3ZlQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICAgICAgICAgICAgLy8gRW5hYmxlIGJ1dHRvbnNcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfSwgMTAwMCk7XG59XG5cbi8vIFdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgdGFicyBvciBtaW5pbWl6ZXMgdGhlIHdpbmRvdywgcGF1c2UgdGhlIHRpbWVyXG5kb2N1bWVudC5vbnZpc2liaWxpdHljaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LmhpZGRlbikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIldpbmRvdyBsb3N0IGZvY3VzLlwiKTtcbiAgICAgICAgaWYgKGFjdGl2ZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTsgLy8gUGF1c2UgdGhlIHRpbWVyXG4gICAgICAgICAgICBhY3RpdmVUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgbG9naWMgd2hlbiB0aGUgdXNlciByZXR1cm5zXG4gICAgICAgIGNvbnNvbGUubG9nKFwiV2luZG93IHJlZ2FpbmVkIGZvY3VzLlwiKTtcbiAgICB9XG59O1xuXG4vLyBGaXJzdCBzdGVwOiBlbmZvcmNlIGEgNS1zZWNvbmQgd2FpdFxuZnVuY3Rpb24gc2V0dXBGaXJzdFN0ZXAoZXhwbGFuYXRpb25UZXh0KSB7XG4gICAgY29uc3QgZmlyc3RTdGVwRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpX2Fuc3dlcl9kaXYnKTtcbiAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcnRydXN0cycpLFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcmRpc3RydXN0cycpLFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcnVuc3VyZScpXG4gICAgXTtcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uPy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUZpcnN0U3RlcENsaWNrKSk7IC8vIFJlbW92ZSBvbGQgbGlzdGVuZXJzXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRmlyc3RTdGVwQ2xpY2spKTsgLy8gQWRkIG5ldyBvbmVzXG5cbiAgICBmdW5jdGlvbiBoYW5kbGVGaXJzdFN0ZXBDbGljaygpIHtcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRmlyc3RTdGVwQ2xpY2spKTsgLy8gQ2xlYW51cFxuICAgICAgICBzZXR1cFNlY29uZFN0ZXAoZXhwbGFuYXRpb25UZXh0KTtcbiAgICB9XG5cbiAgICAkKFwiI2FpX2Fuc3dlcl9kaXZcIikuc2hvdygpO1xuICAgIHN0YXJ0VGltZXIoNSwgZmlyc3RTdGVwRGl2LCBidXR0b25zLCBudWxsKTtcbiAgICAvLyAkKFwiI2FpX2Fuc3dlcl9kaXZcIikuc2hvdygpOyAvLyBTaG93IHRoZSBmaXJzdCBzdGVwXG4gICAgLy8gc3RhcnRUaW1lcig1LCBmaXJzdFN0ZXBEaXYsIGJ1dHRvbnMsICgpID0+IHtcbiAgICAvLyAgICAgLy8gQnV0dG9ucyBhcmUgbm93IGVuYWJsZWQ7IHVzZXIgbXVzdCBjbGljayBvbmUgdG8gcHJvY2VlZFxuICAgIC8vICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAvLyAgICAgICAgIGJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAvLyAgICAgICAgICAgICAnY2xpY2snLFxuICAgIC8vICAgICAgICAgICAgICgpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgc2V0dXBTZWNvbmRTdGVwKGV4cGxhbmF0aW9uVGV4dCk7IC8vIFByb2NlZWQgdG8gdGhlIHNlY29uZCBzdGVwIGFmdGVyIGJ1dHRvbiBjbGlja1xuICAgIC8vICAgICAgICAgICAgIH0sXG4gICAgLy8gICAgICAgICAgICAgeyBvbmNlOiB0cnVlIH0gLy8gRW5zdXJlIHRoZSBldmVudCBsaXN0ZW5lciBpcyBleGVjdXRlZCBvbmx5IG9uY2VcbiAgICAvLyAgICAgICAgICk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vIH0pO1xufVxuXG4vLyBTZWNvbmQgc3RlcCB0aW1lciAoZHluYW1pYyBiYXNlZCBvbiByZWFkaW5nIHRpbWUpXG5mdW5jdGlvbiBzZXR1cFNlY29uZFN0ZXAoZXhwbGFuYXRpb25UZXh0KSB7XG4gICAgY29uc3Qgc2Vjb25kU3RlcERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaV9leHBsYW5hdGlvbl9kaXYnKTtcbiAgICBjb25zdCB3b3JkcyA9IGV4cGxhbmF0aW9uVGV4dC5zcGxpdCgnICcpLmxlbmd0aDtcbiAgICBjb25zdCByZWFkaW5nVGltZSA9IE1hdGgubWF4KE1hdGguY2VpbCgzICsgKHdvcmRzIC8gMjM4KSAqIDYwKSwgNSk7XG5cbiAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydHJ1c3RzJyksXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b25fd2l0aGV4cGxhbmF0aW9uX3VzZXJkaXN0cnVzdHMnKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl93aXRoZXhwbGFuYXRpb25fdXNlcnVuc3VyZScpXG4gICAgXTtcblxuICAgIC8vIFJlbW92ZSBvbGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2Vjb25kU3RlcENsaWNrKSk7XG5cbiAgICAvLyBBZGQgbmV3IGV2ZW50IGxpc3RlbmVyc1xuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVNlY29uZFN0ZXBDbGljaykpO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlU2Vjb25kU3RlcENsaWNrKCkge1xuICAgICAgICAvLyBDbGVhbnVwOiByZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uPy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVNlY29uZFN0ZXBDbGljaykpO1xuICAgICAgICBzZXR1cFRoaXJkU3RlcChleHBsYW5hdGlvblRleHQpO1xuICAgIH1cblxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKTsgLy8gU2hvdyB0aGUgc2Vjb25kIHN0ZXBcbiAgICBzdGFydFRpbWVyKHJlYWRpbmdUaW1lLCBzZWNvbmRTdGVwRGl2LCBidXR0b25zLCBudWxsKTsgLy8gU3RhcnQgdGltZXJcbn1cblxuLy8gVGhpcmQgc3RlcCB0aW1lciAoNSBzZWNvbmRzKVxuZnVuY3Rpb24gc2V0dXBUaGlyZFN0ZXAoZXhwbGFuYXRpb25UZXh0KSB7XG4gICAgY29uc3QgdGhpcmRTdGVwRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FpX2V4cGxhbmF0aW9uX3F1YWxpdHlfZGl2Jyk7XG4gICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJ0cnVzdHMnKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJkaXN0cnVzdHMnKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJ1bnN1cmUnKVxuICAgIF07XG5cbiAgICAvLyBSZW1vdmUgb2xkIGV2ZW50IGxpc3RlbmVyc1xuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uPy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVRoaXJkU3RlcENsaWNrKSk7XG5cbiAgICAvLyBBZGQgbmV3IGV2ZW50IGxpc3RlbmVyc1xuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVRoaXJkU3RlcENsaWNrKSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVUaGlyZFN0ZXBDbGljaygpIHtcbiAgICAgICAgLy8gQ2xlYW51cDogcmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVUaGlyZFN0ZXBDbGljaykpO1xuICAgICAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKTsgLy8gRW5hYmxlIHRoZSBuZXh0IHF1ZXN0aW9uIGJ1dHRvblxuICAgIH1cblxuICAgICQoXCIjYWlfZXhwbGFuYXRpb25fcXVhbGl0eV9kaXZcIikuc2hvdygpOyAvLyBTaG93IHRoZSB0aGlyZCBzdGVwXG4gICAgc3RhcnRUaW1lcig1LCB0aGlyZFN0ZXBEaXYsIGJ1dHRvbnMsIG51bGwpOyAvLyBTdGFydCB0aW1lclxufVxuXG5mdW5jdGlvbiBuZXh0X3F1ZXN0aW9uKCkge1xuICAgIC8vIFJlc2V0IHRpbWVycyBhbmQgc3RhdGVcbiAgICBpZiAoYWN0aXZlVGltZXIpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChhY3RpdmVUaW1lcik7XG4gICAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyByZXN0b3JlIHByZXZpb3VzIHN0YXRlIG9mIFVJXG4gICAgJChcIiNidXR0b25fcmVhZHl0b2Fuc3dlclwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9yZWFkeXRvYW5zd2VyXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX3JlYWR5dG9hbnN3ZXJcIikuc2hvdygpXG5cbiAgICAkKFwiI2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJ0cnVzdHNcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fYW5zd2Vyb25seV91c2VydHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcmRpc3RydXN0c1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9hbnN3ZXJvbmx5X3VzZXJkaXN0cnVzdHNcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fYW5zd2Vyb25seV91c2VydW5zdXJlXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2Fuc3dlcm9ubHlfdXNlcnVuc3VyZVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VyZGlzdHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VyZGlzdHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydW5zdXJlXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbl91c2VydW5zdXJlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNidXR0b25fd2l0aGV4cGxhbmF0aW9ucXVhbGl0eV91c2VydHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcnRydXN0c1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJkaXN0cnVzdHNcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fd2l0aGV4cGxhbmF0aW9ucXVhbGl0eV91c2VyZGlzdHJ1c3RzXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHlfdXNlcnVuc3VyZVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl93aXRoZXhwbGFuYXRpb25xdWFsaXR5X3VzZXJ1bnN1cmVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3F1YWxpdHlfZGl2XCIpLmhpZGUoKVxuICAgIFxuXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5oaWRlKClcbiAgICAkKCcjYnV0dG9uX3F1aXQnKS5oaWRlKClcbiAgICAvLyQoXCIjcmFuZ2VfdmFsXCIpLnZhbCh1c2VyX3RydXN0KVxuXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoJyNyZXdhcmRfYm94X21vY2snKS50ZXh0KGBZb3VyIHRvdGFsIHJld2FyZCBpcyAkJHtiYWxhbmNlLnRvRml4ZWQoMil9ICgke3F1ZXN0aW9uX2l9IHF1ZXN0aW9ucyBhbnN3ZXJlZCkgKyAkMi5gKVxuICAgICAgICAgICAgJCgnI3Jld2FyZF9ib3hfbW9jaycpLnNob3coKVxuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRfbW9ja1wiKS5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJyNyZXdhcmRfYm94JykudGV4dChgWW91ciB0b3RhbCByZXdhcmQgaXMgJCR7YmFsYW5jZS50b0ZpeGVkKDIpfSAoJHtxdWVzdGlvbl9pfSBxdWVzdGlvbnMgYW5zd2VyZWQpICsgJDIuYClcbiAgICAgICAgICAgICQoJyNyZXdhcmRfYm94Jykuc2hvdygpXG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBxdWVzdGlvbiA9IGRhdGFbcXVlc3Rpb25faV1cblxuICAgICQoXCIjcXVlc3Rpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdKVxuICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wicHJlZGljdGVkX2Fuc3dlclwiXSlcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJnZW5lcmF0ZWRfcmF0aW9uYWxlXCJdKVxuXG4gICAgbGV0IHZpc3VhbF9maWRlbGl0eV9jb25mID0gTWF0aC5yb3VuZChxdWVzdGlvbiFbXCJ2aXN1YWwgZmlkZWxpdHlcIl0gKiAxMDApXG4gICAgJChcIiNleHBsYW5hdGlvbl9maWRlbGl0eV9zcGFuXCIpLmh0bWwoYCR7dmlzdWFsX2ZpZGVsaXR5X2NvbmZ9JWApXG4gICAgbGV0IHZpc3VhbF9jb250cmFzdGl2ZW5lc3NfY29uZiA9IE1hdGgucm91bmQocXVlc3Rpb24hW1wiY29udHJhc3RpdmVuZXNzXCJdICogMTAwKVxuICAgICQoXCIjZXhwbGFuYXRpb25fY29udHJhc3RpdmVuZXNzX3NwYW5cIikuaHRtbChgJHt2aXN1YWxfY29udHJhc3RpdmVuZXNzX2NvbmZ9JWApXG5cblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICAvL2lmKHF1ZXN0aW9uLmhhc093blByb3BlcnR5KFwicmV3YXJkX3JhdGlvXCIpKSB7XG4gICAgLy8gICAgbGV0IFtyYXRpbzEsIHJhdGlvMl0gPSBxdWVzdGlvbltcInJld2FyZF9yYXRpb1wiXVxuICAgIC8vICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgLy8gICAgcmF0aW8yID0gTnVtYmVyKHJhdGlvMilcbiAgICAvLyAgICBiZXRfdmFsX3JhdGlvID0gcmF0aW8xL3JhdGlvMlxuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBiZXRfdmFsX3JhdGlvID0gMVxuICAgIC8vfVxuXG4gICAgLy90aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxuXG4gICAgc2V0dXBGaXJzdFN0ZXAocXVlc3Rpb25bXCJnZW5lcmF0ZWRfcmF0aW9uYWxlXCJdKTtcbn1cblxuLy8gZ2V0IHVzZXIgaWQgYW5kIGxvYWQgcXVldWVcbi8vIHRyeSB0byBzZWUgaWYgc3RhcnQgb3ZlcnJpZGUgd2FzIHBhc3NlZFxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbmNvbnN0IHN0YXJ0T3ZlcnJpZGUgPSB1cmxQYXJhbXMuZ2V0KCdzdGFydCcpO1xuY29uc3QgVUlERnJvbVVSTCA9IHVybFBhcmFtcy5nZXQoXCJ1aWRcIilcbmdsb2JhbFRoaXMudXJsX2RhdGEgPSBwYXJhbXNUb09iamVjdCh1cmxQYXJhbXMuZW50cmllcygpKVxuXG5pZiAoZ2xvYmFsVGhpcy51cmxfZGF0YVsnc3R1ZHlfaWQnXSA9PSBudWxsKSB7XG4gICAgZ2xvYmFsVGhpcy51cmxfZGF0YVsnc3R1ZHlfaWQnXSA9IFwiZGVtb19zdHVkeVwiXG59XG5pZiAoZ2xvYmFsVGhpcy51cmxfZGF0YVsncHJvbGlmaWNfaWQnXSA9PSBudWxsKSB7XG4gICAgZ2xvYmFsVGhpcy51cmxfZGF0YVsncHJvbGlmaWNfaWQnXSA9IFwiZGVtb191c2VyXCJcbn1cbmlmIChnbG9iYWxUaGlzLnVybF9kYXRhWydzZXNzaW9uX2lkJ10gPT0gbnVsbCkge1xuICAgIGdsb2JhbFRoaXMudXJsX2RhdGFbJ3Nlc3Npb25faWQnXSA9IFwiZGVtb19zZXNzaW9uXCJcbn1cblxuaWYgKFVJREZyb21VUkwgIT0gbnVsbCkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gVUlERnJvbVVSTCBhcyBzdHJpbmdcbiAgICBpZiAoZ2xvYmFsVGhpcy51aWQgPT0gXCJwcm9saWZpY19yYW5kb21cIikge1xuICAgICAgICBsZXQgcXVldWVfaWQgPSBgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCl9YC5wYWRTdGFydCgzLCBcIjBcIilcbiAgICAgICAgZ2xvYmFsVGhpcy51aWQgPSBgJHt1cmxQYXJhbXMuZ2V0KFwicHJvbGlmaWNfcXVldWVfbmFtZVwiKX0vJHtxdWV1ZV9pZH1gXG4gICAgfVxufSBlbHNlIGlmIChERVZNT0RFKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBcImRlbW9cIlxufSBlbHNlIHtcbiAgICBsZXQgVUlEX21heWJlOiBhbnkgPSBudWxsXG4gICAgd2hpbGUgKFVJRF9tYXliZSA9PSBudWxsKSB7XG4gICAgICAgIFVJRF9tYXliZSA9IHByb21wdChcIkVudGVyIHlvdXIgdXNlciBpZC4gUGxlYXNlIGdldCBpbiB0b3VjaCBpZiB5b3Ugd2VyZSBub3QgYXNzaWduZWQgYW4gaWQgYnV0IHdpc2ggdG8gcGFydGljaXBhdGUgaW4gdGhpcyBleHBlcmltZW50LlwiKVxuICAgIH1cbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJRF9tYXliZSFcbn1cblxuLy8gdmVyc2lvbiBmb3IgcGFwZXJcbmlmIChERVZNT0RFKSB7XG4gICAgTU9DS01PREUgPSB0cnVlXG59IGVsc2UgaWYgKGdsb2JhbFRoaXMudXJsX2RhdGFbJ3Nlc3Npb25faWQnXS5zdGFydHNXaXRoKFwiZGVtb1wiKSkge1xuICAgIE1PQ0tNT0RFID0gdHJ1ZVxufVxuXG5jb25zb2xlLmxvZyhcIlJ1bm5pbmcgd2l0aCBVSURcIiwgZ2xvYmFsVGhpcy51aWQpXG5sb2FkX2RhdGEoKS5jYXRjaCgoX2Vycm9yKSA9PiB7XG4gICAgLy9hbGVydChcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhnbG9iYWxUaGlzLnVpZCEpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59XG4pLnRoZW4oKG5ld19kYXRhKSA9PiB7XG4gICAgZGF0YSA9IG5ld19kYXRhXG4gICAgaWYgKHN0YXJ0T3ZlcnJpZGUgIT0gbnVsbCkge1xuICAgICAgICBxdWVzdGlvbl9pID0gcGFyc2VJbnQoc3RhcnRPdmVycmlkZSkgLSAxXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZnJvbVwiLCBxdWVzdGlvbl9pKVxuICAgIH1cbiAgICAvLyBuZXh0X3F1ZXN0aW9uKClcbiAgICBuZXh0X2luc3RydWN0aW9ucygwKVxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLnNob3coKVxuICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbn0pXG5cbmNvbnNvbGUubG9nKFwiU3RhcnRpbmcgc2Vzc2lvbiB3aXRoIFVJRDpcIiwgZ2xvYmFsVGhpcy51aWQhKVxuXG5sZXQgYWxlcnRfYWN0aXZlID0gZmFsc2VcbmRvY3VtZW50Lm9udmlzaWJpbGl0eWNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAoIWFsZXJ0X2FjdGl2ZSkge1xuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSArPSAxXG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IHRydWVcbiAgICAgICAgLy9pZiAoIShnbG9iYWxUaGlzLnVpZCEuc3RhcnRzV2l0aChcImRlbW9cIikpKSB7XG4gICAgICAgIC8vICAgIGFsZXJ0KFwiUGxlYXNlIGRvbid0IGxlYXZlIHRoZSBwYWdlLiBJZiB5b3UgZG8gc28gYWdhaW4sIHdlIG1heSByZXN0cmljdCBwYXlpbmcgeW91LlwiKVxuICAgICAgICAvL31cbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59IiwiZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0iXSwibmFtZXMiOlsiU0VSVkVSX0xPR19ST09UIiwiTU9DS01PREUiLCJkYXRhIiwicXVlc3Rpb25faSIsInF1ZXN0aW9uIiwidXNlcnNlbGVjdGlvbl9hbnN3ZXJvbmx5IiwidXNlcnNlbGVjdGlvbl93aXRoZXhwbGFuYXRpb24iLCJ1c2Vyc2VsZWN0aW9uX3dpdGhleHBsYW5hdGlvbnF1YWxpdHkiLCJiYWxhbmNlIiwiaW5zdHJ1Y3Rpb25faSIsImNvdW50X2V4aXRlZF9wYWdlIiwicmVnaXN0ZXJBbnN3ZXJPbmx5VXNlclNlbGVjdGlvbiIsInVzZXJfY2hvaWNlIiwiJCIsImF0dHIiLCJzaG93IiwicmVnaXN0ZXJXaXRoRXhwbGFuYXRpb25Vc2VyU2VsZWN0aW9uIiwicmVnaXN0ZXJXaXRoRXhwbGFuYXRpb25RdWFsaXR5VXNlclNlbGVjdGlvbiIsInJlbW92ZUF0dHIiLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsInZhbCIsImhpZGUiLCJuZXh0X3F1ZXN0aW9uIiwiY2hpbGRyZW4iLCJlYWNoIiwiXyIsImVsIiwiaXNfdXNlcl9jb3JyZWN0Iiwic2VsZWN0aW9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbiIsIm9sZF9iYWxhbmNlIiwiY29ycmVjdF9zZWxlY3Rpb24iLCJ1cGRhdGVfYmFsYW5jZSIsImxvZ2dlZF9kYXRhIiwiYXN5bmMiLCJnbG9iYWxUaGlzIiwidXJsX2RhdGEiLCJjb25zb2xlIiwibG9nIiwidWlkIiwicmVzdWx0IiwiYWpheCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9qZWN0IiwicGF5bG9hZCIsInR5cGUiLCJjb250ZW50VHlwZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInNsZWVwIiwiZSIsImxvZ19kYXRhIiwiYWN0aXZlVGltZXIiLCJzdGFydFRpbWVyIiwiZHVyYXRpb24iLCJzdGVwRGl2IiwiYnV0dG9ucyIsImNhbGxiYWNrIiwiY2xlYXJJbnRlcnZhbCIsImZvckVhY2giLCJidXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJ0aW1lckRpc3BsYXkiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJzdHlsZSIsImZvbnRXZWlnaHQiLCJhcHBlbmRDaGlsZCIsInJlbWFpbmluZ1RpbWUiLCJ0ZXh0Q29udGVudCIsInNldEludGVydmFsIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJsZW5ndGgiLCJ0ZXh0IiwidG9GaXhlZCIsImh0bWwiLCJ2aXN1YWxfZmlkZWxpdHlfY29uZiIsIk1hdGgiLCJyb3VuZCIsInZpc3VhbF9jb250cmFzdGl2ZW5lc3NfY29uZiIsImV4cGxhbmF0aW9uVGV4dCIsImZpcnN0U3RlcERpdiIsImhhbmRsZUZpcnN0U3RlcENsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNlY29uZFN0ZXBEaXYiLCJ3b3JkcyIsInNwbGl0IiwicmVhZGluZ1RpbWUiLCJtYXgiLCJjZWlsIiwiaGFuZGxlU2Vjb25kU3RlcENsaWNrIiwidGhpcmRTdGVwRGl2IiwiaGFuZGxlVGhpcmRTdGVwQ2xpY2siLCJzZXR1cFRoaXJkU3RlcCIsInNldHVwU2Vjb25kU3RlcCIsInNldHVwRmlyc3RTdGVwIiwib252aXNpYmlsaXR5Y2hhbmdlIiwiaGlkZGVuIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdGFydE92ZXJyaWRlIiwiZ2V0IiwiVUlERnJvbVVSTCIsImVudHJpZXMiLCJrZXkiLCJ2YWx1ZSIsInBhcmFtc1RvT2JqZWN0IiwicXVldWVfaWQiLCJmbG9vciIsInJhbmRvbSIsInBhZFN0YXJ0IiwiVUlEX21heWJlIiwicHJvbXB0Iiwic3RhcnRzV2l0aCIsImdldEpTT04iLCJEYXRlIiwibm93IiwibG9hZF9kYXRhIiwiY2F0Y2giLCJfZXJyb3IiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSJdLCJzb3VyY2VSb290IjoiIn0=